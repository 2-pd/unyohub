--------------------------------------------------------------------------------

  ユーザー投稿型鉄道運用データベース「鉄道運用Hub」設計案    ページ(8)

--------------------------------------------------------------------------------

_/_/_/_/ 運用表データ入力規則 _/_/_/_/

※「運用表入力サンプル」と合わせて確認してください。なお、サンプルには2022年のJR西日本新在家派出所の運用表の一部を使用しています。

(1) ファイル形式について
ファイル形式は、データ変換に適した「CSV」を使用します。
CSVはExcelで編集できますが、保存時に装飾情報が削除されてしまうことに留意してください。(列の幅やセルの色、フォントサイズなどはファイルに保存されません。)

なお、運用表では、英数字は全て半角で入力する必要があります。
また、鉄道運用Hubのデータ変換スクリプトは空白文字や空白行をデータの一部として解釈してしまうため、見やすくなるとしても不要な空白は使用しないでください。


(2) ファイル名について
CSVファイルは、「平日ダイヤ」「土休日ダイヤ」といったダイヤパターンごとに分けて作ります。
このとき、ダイヤ識別名が「weekday」の場合、ファイル名は「weekday.csv」とする必要があります。


(3) グループタイトル行について
「# 」で始まる行はグループタイトル行とみなします。(井桁マークの直後には半角スペースが必要です。)
データ変換スクリプトは、各運用を、その運用の記載されている行より上にあるグループタイトル行のグループに含まれているものと解釈します。

タイトル行のA列には「# 」に続けてタイトル名を入力します。B列以降には何も入力しないでください。


(4) 運用の行について
運用は4行単位で入力します。列車数の多い運用では列数が膨大となりますが、別の行に分割して入力することはできません。

A列は、1つ目の行に運用番号(「番号」という名称ですが、アルファベットやかな、漢字も使用できます)、2つ目の行に出庫場所、3つ目の行に入庫場所、4つ目の行に所定の両数を入力します。
出庫場所と入庫場所については、駅の乗り場番号や車庫の留置線番号が確定している場合、駅名(または車庫名)の後に「:」(半角コロン)を入力し、それに続けて乗り場番号や留置線番号を入力してください。なお、1つの乗り場や留置線に異なる運用の編成が併結または縦列で停泊する場合は、それぞれの運用を区別するため「1番線上り方」のように入力してください。

B列以降は、列ごとに1つの「区間組成」を入力します。(詳細は後述)
1つ目の行に列車番号(こちらもアルファベットやかな漢字が使用可能です)、2つ目の行に駅頭文字(駅の頭文字が別の駅と被る場合は代わりに別の文字を使用します)に続けて始発時刻、3つ目の行に終着時刻を入力します。(時間は24時間表記で入力し、分が1桁の場合は前に「0」をつけて2桁にしてください。時と分の間のコロンも半角である必要があります。日付を跨ぐ列車は、24時、25時として記入してください。)

4つ目の行のみ、B列はテーマカラーのRGB値となります。RGB値は16進数6桁の形式で、先頭に「#」を付けてください。4つ目の行のC列以降は入力不要です。

なお、別の運用と組成している場合は、列車番号の後に半角括弧を入力し、そこに、前から何両目から何両目までがその運用の担当なのかを、「(半角数字-半角数字)」(ハイフンも半角です)の形式で入力してください。


(5) 「区間組成」について
鉄道運用Hubでは、データを効率的に処理するため、列車を「区間組成」という単位に細分化しています。

列車は、同じ列車番号でも、途中の駅で増結を行って別の運用の編成が加わったり、別の路線に乗り入れたりしますが、このような複雑なデータを使用して検索処理を実施することは予期せぬ不具合や表示速度の大幅な低下を招くため、この対策として区間組成という概念が生まれました。

区間組成は、文字通り、ある「区間」を走行する「組成」を示す概念です。
他の路線への乗り入れや増解結の存在しない路線においては、区間組成と列車は完全に同じ存在とみなせます。
しかし、路線を跨いで走行する列車や途中で組成の変わる列車では、別の路線に入った時点と組成の変わった時点で別の区間組成として扱い、運用表では別々の項目に記入する必要が生じます。

例えば、サンプルCSVファイルの4431Mは、途中の粉河駅で3両目以降を切り離しているため、粉河駅の前後で別々の区間組成となっています。
また、同じくサンプルCSVファイルの520Sは、途中の高田駅で別の路線に乗り入れているため、高田駅の前後で別々の区間組成となっています。

なお、鉄道運用Hubは画面表示時に自動的に区間組成を結合して1つの列車として表示します。


(6) 列車番号の不明な列車、時刻の不明な区間組成、一時的な入庫等について
列車番号の不明な列車は、列車番号の代わりに種別名を入力し、その種別名の前に「?」(半角疑問符)を付けてください。これにより、変換スクリプトが自動的に仮列車番号を割り当てます。

時刻の不明な区間組成には、不正確でも構わないので時刻を指定してください。

運用途中での一時的な入庫は、列車番号の代わりに入庫場所を入力し、その入庫場所の前に「.」(半角ピリオド)を付けてください。入庫・出庫時間は前後の区間運用の運転時刻から自動的に算出されるため、時刻の入力は不要です。
なお、入庫中の列車は走行位置情報に表示されないため、駅ホームでの留置の場合は入庫として入力しないほうが好都合な場合があります。
