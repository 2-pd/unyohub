--------------------------------------------------------------------------------

  ユーザー投稿型鉄道運用データベース「鉄道運用Hub」設計案    ページ(9)

--------------------------------------------------------------------------------

_/_/_/_/ 運用表データ入力規則 _/_/_/_/

※「運用表入力サンプル」と合わせて確認してください。なお、サンプルには2022年のJR西日本新在家派出所の運用表の一部を使用しています。
※入力サンプルには、時刻表データが使用可能な場合に利用できるシンプルな入力方式(以下、シンプル方式)である「運用表入力サンプル-1」と、時刻表データの有無に関わらず変換可能でカスタマイズ性の高い専用方式(以下、専用方式)である「運用表入力サンプル-2」の2種類が存在します。一般的な用途ではシンプル方式の利用をおすすめします。

(1) ファイル形式について
ファイル形式は、データ変換に適した「CSV」を使用します。
CSVはExcelで編集できますが、保存時に装飾情報が削除されてしまうことに留意してください。(列の幅やセルの色、フォントサイズなどはファイルに保存されません。)

なお、運用表では、英数字は全て半角で入力する必要があります。
また、鉄道運用Hubのデータ変換スクリプトは空白文字や空白行をデータの一部として解釈してしまうため、見やすくなるとしても不要な空白は使用しないでください。


(2) ファイル名について
CSVファイルは、「平日ダイヤ」「土休日ダイヤ」といったダイヤパターンごとに分けて作ります。
このとき、ダイヤ識別名が「weekday」の場合、ファイル名は「operation_table_weekday.csv」とする必要があります。


(3) 運用系統タイトル行について
「# 」で始まる行は運用系統タイトル行とみなします。(井桁マークの直後には半角スペースが必要です。)
データ変換スクリプトは、各運用を、その運用の記載されている行より上にある運用系統タイトル行の運用系統に属しているものと解釈します。

タイトル行のA列には「# 」に続けてタイトル名を入力します。

◆ シンプル方式の場合
タイトル行のB列にはテーマカラーのRGB値を入力します。テーマカラーのRGB値は16進数6桁の形式で、先頭に「#」を付けてください。

◆ 専用方式の場合
タイトル行のB列以降には何も入力しないでください。


(4) 運用の行について
◆ シンプル方式の場合
運用は各運用を1行に入力します。列車数の多い運用では列数が膨大となりますが、別の行に分割して入力することはできません。
空行や、運用番号の入力されていない行は、変換時に無視されます。

A列には、運用番号(「番号」という名称ですが、アルファベットやかな、漢字も使用できます)を入力します。
運用番号の先頭に「@」(半角アットマーク)を記載した運用の列車は、運休以外の運用情報が投稿されるまで走行位置モードに表示されません。

B列には、所定の両数を入力します。
所定の両数は、両数を表す数値のあとに「(半角数字-半角数字)」(ハイフンも半角です)の形式で数値を指定することで、その運用を代走可能な編成両数の範囲を指定することができます。

C列には、出庫場所を入力します。
出庫場所、及び、後述の入庫場所について、駅停泊の場合は、「:」(半角コロン)のあとに乗り場名を入力してください。

D列には、出庫時刻を入力します。
駅ホーム停泊から最初の列車に充当される運用の場合、出庫時刻はその駅の営業開始時刻に合わせると便利です。車庫から回送列車として出庫する運用の場合は、出庫時刻をその回送列車の始発時刻と同一にして問題ありません。詳細な入力様式は、後述の時刻表にない列車の始発・終着時刻と同様です。

E列には、入庫場所を入力します。

F列には、入庫時刻を入力します。
後述の時刻表にない列車の始発・終着時刻と同様、入庫時刻が日付を跨ぐ場合は、0時や1時ではなく、24時や25時として記載してください。
終日車庫で予備車として待機するなどの理由で出庫時刻と入庫時刻が存在しない運用については、出庫時刻と入庫時刻の代わりに「NA」と入力する必要があります。

G列以降には、各セルに1列車ずつ、列車番号を運用順に入力します。
時刻表に入力していない列車(回送など)の場合は時刻表から時刻を判定することができないため、セルの末尾に「[始発駅頭文字と時刻-終着駅頭文字と時刻]」の形式で始発駅・終着駅と時刻を入力してください。(時間は24時間表記で入力し、分が1桁の場合は前に「0」をつけて2桁にしてください。時と分の間のコロンも半角である必要があります。日付を跨ぐ列車は、24時、25時として記入してください。)
また、途中駅で増解結する列車の場合は、その地点より前後で別列車として入力する必要があり、この場合も始発駅・終着駅と時刻の入力が必要になります。

なお、別の運用と組成している場合は、列車番号の後に半角括弧を入力し、そこに、組成位置(前から何両目から何両目までがその運用の担当なのか)を、「(半角数字-半角数字)」(ハイフンも半角です)の形式で入力してください。その運用の所定両数が1両のみの場合、組成位置は「(半角数字)」の形式でも記載可能です。

◆ 専用方式の場合
運用は3行+補足説明行(後述)の4行単位で入力します。列車数の多い運用では列数が膨大となりますが、別の行に分割して入力することはできません。
余分な空行は変換時に無視されます。

A列は、1つ目の行に運用番号(「番号」という名称ですが、アルファベットやかな、漢字も使用できます)、2つ目の行に所定の両数、3つ目の行にテーマカラーのRGB値を入力します。
所定の両数は、両数を表す数値のあとに「(半角数字-半角数字)」(ハイフンも半角です)の形式で数値を指定することで、その運用を代走可能な編成両数の範囲を指定することができます。
テーマカラーのRGB値は16進数6桁の形式で、先頭に「#」を付けてください。

B列は、1つ目の行に出庫場所、2つ目の行に出庫時刻を入力します。
出庫場所、及び、後述の入庫場所について、駅停泊の場合は、「:」(半角コロン)のあとに乗り場名を入力してください。
駅ホーム停泊から最初の列車に充当される運用の場合、出庫時刻はその駅の営業開始時刻に合わせると便利です。車庫から回送列車として出庫する運用の場合は、出庫時刻をその回送列車の始発時刻と同一にして問題ありません。詳細な入力様式は、後述の区間組成の始発・終着時刻と同様です。

C列は、1つ目の行に入庫場所、2つ目の行に入庫時刻を入力します。
後述の区間組成の始発・終着時刻と同様、入庫時刻が日付を跨ぐ場合は、0時や1時ではなく、24時や25時として記載してください。
終日車庫で予備車として待機するなどの理由で出庫時刻と入庫時刻が存在しない運用については、出庫時刻と入庫時刻の代わりに「NA」と入力する必要があります。

なお、出庫場所と入庫場所については、駅の乗り場番号や車庫の留置線番号が確定している場合、駅名(または車庫名)の後に「:」(半角コロン)を入力し、それに続けて乗り場番号や留置線番号を入力してください。なお、1つの乗り場や留置線に異なる運用の編成が併結または縦列で停泊する場合は、それぞれの運用を区別するため「1番線上り方」のように入力してください。

D列以降は、列ごとに1つの「区間組成」を入力します。(詳細は後述)
1つ目の行に列車番号(こちらもアルファベットやかな漢字が使用可能です)、2つ目の行に駅頭文字(駅の頭文字が別の駅と被る場合は代わりに別の文字を使用します)に続けて始発時刻、3つ目の行に終着時刻を入力します。(時間は24時間表記で入力し、分が1桁の場合は前に「0」をつけて2桁にしてください。時と分の間のコロンも半角である必要があります。日付を跨ぐ列車は、24時、25時として記入してください。)

なお、別の運用と組成している場合は、列車番号の後に半角括弧を入力し、そこに、組成位置(前から何両目から何両目までがその運用の担当なのか)を、「(半角数字-半角数字)」(ハイフンも半角です)の形式で入力してください。その運用の所定両数が1両のみの場合、組成位置は「(半角数字)」の形式でも記載可能です。


(5) 「区間組成」について
鉄道運用Hubでは、データを効率的に処理するため、列車を「区間組成」という単位に細分化しています。

列車は、同じ列車番号でも、途中の駅で増結を行って別の運用の編成が加わったり、別の路線に乗り入れたりしますが、このような複雑なデータを使用して検索処理を実施することは予期せぬ不具合や表示速度の大幅な低下を招くため、この対策として区間組成という概念が生まれました。

区間組成は、文字通り、ある「区間」を走行する「組成」を示す概念です。
他の路線への乗り入れや増解結の存在しない路線においては、区間組成と列車は完全に同じ存在とみなせます。
しかし、路線を跨いで走行する列車や途中で組成の変わる列車では、別の路線に入った時点と組成の変わった時点で別の区間組成として扱い、専用方式の運用表では別々の項目に記入する必要が生じます。

例えば、サンプル-1とサンプル-2のCSVファイルの4431Mは、途中の粉河駅で3両目以降を切り離しているため、粉河駅の前後で別々の区間組成となっています。
また、同じくサンプル-2のCSVファイルの520Sは、途中の高田駅で別の路線に乗り入れているため、高田駅の前後で別々の区間組成となっています。

なお、鉄道運用Hubは画面表示時に自動的に区間組成を結合して1つの列車として表示します。


(6) 列車番号の不明な列車、時刻の不明な区間組成、一時的な入庫等について
列車番号の不明な列車は、列車番号の代わりに種別名を入力し、その種別名の前に「?」(半角疑問符)を付けてください。これにより、変換スクリプトが自動的に仮列車番号を割り当てます。

時刻の不明な区間組成には、不正確でも構わないので時刻を指定してください。

運用途中での一時的な入庫は、列車番号の代わりに入庫場所を入力し、その入庫場所の前に「.」(半角ピリオド)を付けてください。入庫・出庫時間は前後の区間運用の運転時刻から自動的に算出されるため、時刻の入力は不要です。
なお、入庫中の列車は走行位置情報に表示されないため、駅ホームでの留置の場合は入庫として入力しないほうが好都合な場合があります。


(7)運用の補足説明について
なんらかの特記事項がある運用については、短い補足説明文を付加することが可能です。

◆ シンプル方式の場合
補足説明を付加したい運用の次の行のA列に「* 」(半角アスタリスクの後に半角スペース)を入力し、それに続けて補足説明文を1行で記載してください。

◆ 専用方式の場合
各運用の4行目のA列に補足説明文を1行で記載してください。補足説明がない場合は4行目を空行としてください。
